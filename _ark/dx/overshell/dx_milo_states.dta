(dxState_MiloObjects
   (view
      {do
         ($options
            {array 0})
         {set $findme {find_obj {{get_track_panel} loaded_dir} {sprint "track_" {$this get_slot_num}}}}
         {$findme iterate Object $p
            {if {! {find_elem $options {sprintf "%s" {$p class_name}}}}
               {push_back $options {sprintf "%s" {$p class_name}}}
            }
         }
         {sort $options}
         {dx_state_setup dxState_MiloObjects FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {set $categorizeme {$component selected_sym}}
      {$this show_state dxState_MiloFind}
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_TextureMenu}
      {set $findme FALSE}
   )
)
(dxState_MiloFind
   (view
      {do
         ($options
            {array 0})
         {set $findme {find_obj {{get_track_panel} loaded_dir} {sprint "track_" {$this get_slot_num}}}}
         {$findme iterate Object $p
            {if {== {$p class_name} $categorizeme}
               {push_back $options {sprintf "%s" {$p name}}}
            }
         }
         {sort $options}
         {dx_state_setup dxState_MiloFind FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {set $findme {$findme find {$component selected_sym}}}
      {switch $categorizeme
         (AnimFilter kDataUnhandled)
         (BandLabel kDataUnhandled)
         (Cam kDataUnhandled)
         (Environ kDataUnhandled)
         (EventTrigger {$findme trigger})
         (FXSendEQ kDataUnhandled)
         (Group {$this show_state dxState_PositionRemapper})
         (Mat
            {$this show_state dxState_MiloMat}
         )
         (MatAnim kDataUnhandled)
         (Mesh kDataUnhandled)
         (ObjectDir kDataUnhandled)
         (OverDriveMeterDir kDataUnhandled)
         (ParticleSys kDataUnhandled)
         (PropAnim kDataUnhandled)
         (RandomGroupSeq kDataUnhandled)
         (RndDir kDataUnhandled)
         (Sfx
            {$findme play}
         )
         (StreakMeterDir kDataUnhandled)
         (SynthFader kDataUnhandled)
         (SynthSample kDataUnhandled)
         (Tex kDataUnhandled)
         (Text
            {$findme set font default}
         )
         (TrackWidget kDataUnhandled)
         (Trans kDataUnhandled)
         (TransAnim kDataUnhandled)
         (UIColor kDataUnhandled)
         (UIGuide kDataUnhandled)
         (WaitSeq kDataUnhandled)
      }
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_MiloObjects}
   )
)
(dxState_MiloMat
   (view
      {do
         ($options
            {array 0})
         {push_back $options color}
         {push_back $options use_environ}
         {push_back $options prelit}
         {push_back $options intensify}
         {dx_state_setup dxState_MiloMat FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (color {$this show_state dxState_MiloRGBColor})
      }
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_MiloObjects}
   )
)

#define DX_SET_RBG_COLOR_DATA
(
   {$current_list set_data
      (
         ;if we are inside our special menu item, we want to blank out the other lines so it looks nice
         {if_else {&& $dx_list_item_selected {!= $dx_list_pos 0}} os_blnk {sprintf "Red: %.2f" $mycoolcolor_r}}
         {if_else {&& $dx_list_item_selected {!= $dx_list_pos 1}} os_blnk {sprintf "Green: %.2f" $mycoolcolor_g}}
         {if_else {&& $dx_list_item_selected {!= $dx_list_pos 2}} os_blnk {sprintf "Blue: %.2f" $mycoolcolor_b}}
         {if_else {&& $dx_list_item_selected {!= $dx_list_pos 3}} os_blnk {sprintf "Alpha: %.2f" $mycoolalpha}}
      )
   }
)
(dxState_MiloRGBColor
   (view
      options_audio
   )
   (enter
      {unpack_color {$findme get color} $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}
      {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
      {set $mycoolalpha {$findme get alpha}}
      ;setup/reset the list tracking info
      {set $dx_list_item_selected FALSE}
      {set $dx_list_pos 0}
      {set $current_list options_audio.lst}
      {if_else {$this in_game}
         {$current_list set_type overshell_menu_ingame}
         {$current_list set_type overshell_menu}
      }
      {$current_list restart_highlight_matanim}
      {$current_list refresh}
      DX_SET_RBG_COLOR_DATA
   )
   ;(SCROLL_MSG
   ;   DX_MENU_SCROLL_DESC ;updates description with currently selected modifier
   ;)
   ;these two options are selectable and act normal with a destination trail
   ;(SELECT_MSG
   ;   {switch {$component selected_sym}
   ;      (os_track_speeds
   ;         {$this show_state dxState_TrackSpeeds})
   ;      (os_acceleration_mode
   ;         {$this show_state dxState_AccelerationMode})
   ;   }
   ;)
   ;this is handling the dynamic "slider" replacement
   (BUTTON_DOWN_MSG
      {if_else
         $dx_list_item_selected
         ;we selected an object so now only track up/down
         {switch
            $action
            ;if we confirm or back out of the internal selection shell, go back up to the normal level and refresh the list
            ((kAction_Confirm kAction_Cancel)
               {set $dx_list_item_selected FALSE}
               DX_SET_RBG_COLOR_DATA
            )
            ;if we pressed Up or Down while inside a selected list item
            ((kAction_Down kAction_Up)
               {switch {$current_list selected_data}
                  (0
                     {if
                        ;set minimum and maximum for up and down presses for this variable
                        {switch $action
                           (kAction_Down {> $mycoolcolor_r 0.01}) ;minimum
                           (kAction_Up {< $mycoolcolor_r 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_r
                           {switch $action
                              (kAction_Down {- $mycoolcolor_r 0.02})
                              (kAction_Up {+ $mycoolcolor_r 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 0}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (1
                     {if
                        ;set minimum and maximum for up and down presses for this variable
                        {switch $action
                           (kAction_Down {> $mycoolcolor_g 0.01}) ;minimum
                           (kAction_Up {< $mycoolcolor_g 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_g
                           {switch $action
                              (kAction_Down {- $mycoolcolor_g 0.02})
                              (kAction_Up {+ $mycoolcolor_g 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 1}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (2
                     {if
                        ;set minimum and maximum for up and down presses for this variable
                        {switch $action
                           (kAction_Down {> $mycoolcolor_b 0.01}) ;minimum
                           (kAction_Up {< $mycoolcolor_b 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_b
                           {switch $action
                              (kAction_Down {- $mycoolcolor_b 0.02})
                              (kAction_Up {+ $mycoolcolor_b 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 2}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (3
                     {if
                        ;set minimum and maximum for up and down presses for this variable
                        {switch $action
                           (kAction_Down {> $mycoolalpha 0.01}) ;minimum
                           (kAction_Up {< $mycoolalpha 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolalpha
                           {switch $action
                              (kAction_Down {- $mycoolalpha 0.02})
                              (kAction_Up {+ $mycoolalpha 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 3}
                     {$findme set alpha $mycoolalpha}
                  )
                  kDataUnhandled
               }
               ;refresh the list
               DX_SET_RBG_COLOR_DATA
            )
            kDataUnhandled
         }
         ;we havent specifically selected anything, we are only hovering on a list item
         {switch
            $action
            ;check if we are selecting on the special item that drills down a level
            (kAction_Confirm
               {switch {$current_list selected_data}
                  ((0 1 2 3)
                     ;refresh the list but this time tell the game we are a level deeper to hide other options
                     {set $dx_list_item_selected TRUE}
                     {set $dx_list_pos {$current_list selected_data}}
                     DX_SET_RBG_COLOR_DATA
                  )
                  kDataUnhandled
               }
            )
            ;if we pressed left or right while hovering on a specific list item
            ((kAction_Left kAction_Right)
               {switch {$current_list selected_data}
                  (0
                     {if
                        ;set minimum and maximum for left and right presses for this variable
                        {switch $action
                           (kAction_Left {> $mycoolcolor_r 0.01}) ;minimum
                           (kAction_Right {< $mycoolcolor_r 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_r
                           {switch $action
                              (kAction_Left {- $mycoolcolor_r 0.02})
                              (kAction_Right {+ $mycoolcolor_r 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 0}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (1
                     {if
                        ;set minimum and maximum for left and right presses for this variable
                        {switch $action
                           (kAction_Left {> $mycoolcolor_g 0.01}) ;minimum
                           (kAction_Right {< $mycoolcolor_g 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_g
                           {switch $action
                              (kAction_Left {- $mycoolcolor_g 0.02})
                              (kAction_Right {+ $mycoolcolor_g 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 1}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (2
                     {if
                        ;set minimum and maximum for left and right presses for this variable
                        {switch $action
                           (kAction_Left {> $mycoolcolor_b 0.01}) ;minimum
                           (kAction_Right {< $mycoolcolor_b 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolcolor_b
                           {switch $action
                              (kAction_Left {- $mycoolcolor_b 0.02})
                              (kAction_Right {+ $mycoolcolor_b 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 2}
                     {$findme set color {pack_color $mycoolcolor_r $mycoolcolor_g $mycoolcolor_b}}
                  )
                  (3
                     {if
                        ;set minimum and maximum for left and right presses for this variable
                        {switch $action
                           (kAction_Left {> $mycoolalpha 0.01}) ;minimum
                           (kAction_Right {< $mycoolalpha 0.99}) ;maximum
                        }
                        ;actually set our variable, based on the pressed action
                        {set $mycoolalpha
                           {switch $action
                              (kAction_Left {- $mycoolalpha 0.02})
                              (kAction_Right {+ $mycoolalpha 0.02})
                           }
                        }
                     }
                     ;track our current list position for hiding other list elements while we have selected this one
                     {set $dx_list_pos 3}
                     {$findme set alpha $mycoolalpha}
                  )
                  kDataUnhandled
               }
               ;refresh the list
               DX_SET_RBG_COLOR_DATA
            )
            kDataUnhandled
         }
      }
   )
   (on_cancel
      {$this show_state dxState_MiloMat}
   )
)